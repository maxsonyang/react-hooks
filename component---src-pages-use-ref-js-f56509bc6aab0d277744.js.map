{"version":3,"sources":["webpack://react-hooks/./src/components/useFetch.js","webpack://react-hooks/./src/components/renderCounter.js","webpack://react-hooks/./src/pages/useRef.js"],"names":["useFetch","url","useState","data","loading","state","setState","useEffect","fetch","then","r","text","BuggyFetch","setTimeout","SafeBuggyFetch","isCurrent","useRef","current","renders","console","log","name","setName","nameRef","showCounter","setShowCounter","showBuggyFetch","setShowBuggyFetch","showSafeBuggyFetch","setShowSafeBuggyFetch","className","value","onChange","e","target","ref","onClick","focus","showBuggy"],"mappings":"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","file":"component---src-pages-use-ref-js-f56509bc6aab0d277744.js","sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\n\nexport function useFetch(url) {\n\n  const [state, setState] = useState({\n    data : null,\n    loading: true,\n  })\n\n  useEffect(() => {\n    setState(state => ({ data: state.data, loading: true }))\n    fetch(url)\n      .then(r => r.text())\n      .then(text => {\n       setState({ data: text, loading: false})\n      })\n  }, [url, setState])\n\n  return state;\n}\n\nexport function useSlowFetch(url) {\n  const [state, setState] = useState({\n    data : null,\n    loading: true,\n  })\n\n  useEffect(() => {\n    setState(state => ({ data: state.data, loading: true }))\n    fetch(url)\n      .then(r => r.text())\n      .then(text => {\n        setTimeout(() => {\n          setState({ data: text, loading: false})\n        }, 4000)\n      })\n  }, [url, setState])\n\n  return state;\n}\n\nexport function useSaferSlowFetch(url) {\n  const isCurrent = useRef(true);\n  const [state, setState] = useState({\n    data : null,\n    loading: true,\n  })\n\n  useEffect(() => {\n    return () => {\n      // called when component unmounts.\n      isCurrent.current = false;\n    }\n  })\n\n  useEffect(() => {\n    setState(state => ({ data: state.data, loading: true }))\n    fetch(url)\n      .then(r => r.text())\n      .then(text => {\n        setTimeout(() => {\n          if (!isCurrent.current) {\n            setState({ data: text, loading: false})\n          }\n        }, 4000)\n      })\n  }, [url, setState])\n\n  return state;\n}\n\nexport function BuggyFetch() {\n\n  const { data, loading } = useSlowFetch(`http://numbersapi.com/42/trivia`)\n  return (\n    <div>\n      <div>{loading ? \"loading very slowly...\" : data}</div>\n    </div>\n  )\n}\n\nexport function SafeBuggyFetch() {\n\n  const { data, loading } = useSaferSlowFetch(`http://numbersapi.com/42/trivia`)\n  return (\n    <div>\n      <div>{loading ? \"loading very slowly...\" : data}</div>\n    </div>\n  )\n}","import React, { useRef } from 'react';\n\nfunction RenderCounter() {\n  const renders = useRef(0)\n\n  console.log(\"Render count: \", renders.current++)\n\n  return (\n    <div>\n      I have been rendered {`${renders.current}`} {renders.current == 1 ? 'time' : 'times'}\n    </div>\n  )\n}\n\nexport default RenderCounter;","import React, { useState, useRef } from 'react';\nimport RenderCounter from \"../components/renderCounter\";\nimport { BuggyFetch, SafeBuggyFetch } from \"../components/useFetch\";\nimport \"../styles/pages/hooks.scss\";\n\nfunction UseRefPage() {\n\n  const [name, setName] = useState(\"\");\n  const nameRef = useRef();\n  const [showCounter, setShowCounter] = useState(true);\n  const [showBuggyFetch ,setShowBuggyFetch] = useState(false);\n  const [showSafeBuggyFetch , setShowSafeBuggyFetch] = useState(true);\n\n  return (\n    <div className=\"container-fluid\">\n      <div className=\"page-header\">\n        <h1>\n          useRef\n        </h1>\n        <div className=\"page-subheader\">\n          Provides a reference to, well, anything it seems.\n        </div>\n      </div>\n\n      {/* Basic example. */}\n      <div className=\"hooks-content\">\n        <h2>\n          Basic useRef Example.\n        </h2>\n        <div className=\"blurb\">\n          An input field that has a reference associated with it.\n        </div>\n        <div>\n          <input\n            name=\"name\"\n            value={name}\n            onChange={(e) => setName(e.target.value)}\n            ref={nameRef}\n          />\n          <button onClick={() => {\n            nameRef.current.focus();\n          }}>\n            Click\n          </button>\n        </div>\n      </div>\n\n      {/* Render counter */}\n      <div className=\"hooks-content\">\n        <h2>\n          Basic useRef Example.\n        </h2>\n        <div className=\"blurb\">\n          Reference that shows the amount of times its been rendered without\n          triggering a re-render itself.\n        </div>\n        <button onClick={() => setShowCounter((showCounter) => !showCounter)}>\n          Toggle Show Counter.\n        </button>\n        <div>\n          {showCounter && <RenderCounter />}\n        </div>\n      </div>\n\n      {/* Slow fetch example */}\n      <div className=\"hooks-content\">\n        <h2>\n          Buggy Slow Fetch\n        </h2>\n        <div className=\"blurb\">\n          A buggy fetch to demonstrate a use case of useRef. Unmounting\n          the component before the data has finished fetching will cause a\n          memory leak. Keep your console open, and you might need to refresh\n          to see this.\n        </div>\n        <button onClick={() => setShowBuggyFetch((showBuggy) => !showBuggy)}>\n          Toggle Show Buggy Fetch\n        </button>\n        <div>\n          {showBuggyFetch && <BuggyFetch />}\n        </div>\n      </div>\n\n      {/* Safe Buggy */}\n      <div className=\"hooks-content\">\n        <h2>\n          Safe Buggy Slow Fetch\n        </h2>\n        <div className=\"blurb\">\n          Addresses the above issue with useRef. We add a flag that indicates\n          whether or not the component is current. In conjunction with useEffect,\n          we provide a clean-up function that sets this flag to false if the component\n          is about to unmount, preventing the error from earlier from happening.\n        </div>\n        <button onClick={() => setShowSafeBuggyFetch((showBuggy) => !showBuggy)}>\n          Toggle Show Buggy Fetch\n        </button>\n        <div>\n          {showSafeBuggyFetch && <SafeBuggyFetch />}\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default UseRefPage;"],"sourceRoot":""}